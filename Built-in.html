<!DOCTYPE html>
<html lang="en">
<head>
  <title>Built-in - Catherine Ann MacDonald</title>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <!-- Security Headers -->
  <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="Referrer-Policy" content="no-referrer-when-downgrade">
  <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://ajax.googleapis.com https://cdnjs.cloudflare.com https://maxcdn.bootstrapcdn.com; connect-src 'self'; style-src 'self' 'unsafe-inline' https://maxcdn.bootstrapcdn.com; img-src 'self' data:; frame-src https://open.spotify.com; font-src 'self' data:;">
  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  
  <!-- Cursor follower script with multiple trailing images -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const numFollowers = 5; // Number of trailing images
      const followers = [];
      const positions = [];
      let isMouseOnPage = false;
      let targetX = 0;
      let targetY = 0;
      
      // Create multiple cursor followers
      for (let i = 0; i < numFollowers; i++) {
        const follower = document.createElement('img');
        follower.src = 'SitePics/Bugtie.png';
        follower.style.position = 'fixed';
        follower.style.width = '30px';
        follower.style.height = '30px';
        follower.style.pointerEvents = 'none';
        follower.style.zIndex = '9999';
        follower.style.display = 'none';
        follower.style.transition = 'left 0.1s ease-out, top 0.1s ease-out';
        document.body.appendChild(follower);
        
        followers.push(follower);
        positions.push({ x: 0, y: 0 });
      }
      
      // Animation function
      function animate() {
        if (isMouseOnPage && followers[0].style.display !== 'none') {
          // Update each follower to follow the previous one
          for (let i = 0; i < numFollowers; i++) {
            const follower = followers[i];
            const pos = positions[i];
            
            let targetX, targetY;
            
            if (i === 0) {
              // First follower follows the cursor
              targetX = window.targetX || 0;
              targetY = window.targetY || 0;
            } else {
              // Other followers follow the previous follower
              const prevPos = positions[i - 1];
              targetX = prevPos.x;
              targetY = prevPos.y;
            }
            
            // Calculate distance to target
            const dx = targetX - pos.x;
            const dy = targetY - pos.y;
            
            // Move towards target with easing (slower for trailing followers)
            const speed = 0.3 - (i * 0.05); // Each follower is slightly slower
            const newX = pos.x + dx * speed;
            const newY = pos.y + dy * speed;
            
            // Update position
            pos.x = newX;
            pos.y = newY;
            
            // Apply position to element
            follower.style.left = newX + 'px';
            follower.style.top = newY + 'px';
            
            // Add some rotation for fun
            const rotation = Math.sin(Date.now() * 0.005 + i) * 10;
            follower.style.transform = `rotate(${rotation}deg)`;
          }
        }
        
        // Always continue animation
        requestAnimationFrame(animate);
      }
      
      // Start continuous animation
      animate();
      
      // Track mouse movement
      document.addEventListener('mousemove', function(e) {
        followers.forEach(follower => follower.style.display = 'block');
        isMouseOnPage = true;
        window.targetX = e.clientX + 10;
        window.targetY = e.clientY + 10;
        targetX = e.clientX + 10;
        targetY = e.clientY + 10;
      });
      
      // Hide when mouse leaves the page
      document.addEventListener('mouseleave', function() {
        followers.forEach(follower => follower.style.display = 'none');
        isMouseOnPage = false;
      });
      
      // Show when mouse enters the page
      document.addEventListener('mouseenter', function() {
        followers.forEach(follower => follower.style.display = 'block');
        isMouseOnPage = true;
      });
    });

    // Walking character animation
    document.addEventListener('DOMContentLoaded', function() {
      const walkingChar = document.getElementById('walkingCharacter');
      let position = 0;
      let direction = 1; // 1 for right, -1 for left
      const speed = 2; // pixels per frame
      const maxWidth = window.innerWidth - 50; // account for character width
      
      function walk() {
        position += speed * direction;
        
        // Reverse direction when hitting edges
        if (position >= maxWidth) {
          direction = -1;
          walkingChar.style.transform = 'scaleX(-1)'; // flip horizontally
        } else if (position <= 0) {
          direction = 1;
          walkingChar.style.transform = 'scaleX(1)'; // normal orientation
        }
        
        walkingChar.style.left = position + 'px';
        requestAnimationFrame(walk);
      }
      
      // Start walking animation
      walk();
    });

    // Image Modal functionality
    document.addEventListener('DOMContentLoaded', function() {
      // Get the modal
      var modal = document.getElementById('imageModal');
      
      // Get the image and insert it inside the modal - use its "alt" text as a caption
      var img = document.getElementById('modalImage');
      var modalImg = document.getElementById("modalImageDisplay");
      var captionText = document.getElementById("caption");
      
      // When user clicks on image, open modal
      img.onclick = function(){
        modal.style.display = "block";
        modalImg.src = this.src;
        captionText.innerHTML = this.alt;
      }
      
      // Get the <span> element that closes the modal
      var span = document.getElementsByClassName("close")[0];
      
      // When the user clicks on <span> (x), close the modal
      span.onclick = function() { 
        modal.style.display = "none";
      }
      
      // When user clicks anywhere outside of the modal, close it
      window.onclick = function(event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      }
    });
  </script>

  <style>
    body {
      background-image: url("SitePics/spectrumbackground.png");
      background-size: 200% 100%;
      background-repeat: repeat-x;
      background-attachment: fixed;
      background-position: 0% 50%;
      font-family: Arial, sans-serif;
      color: black;
      margin: 0;
      padding: 0;
      animation: spectrumScroll 40s linear infinite;
    }

    .walking-character {
      position: fixed;
      bottom: 20px;
      width: 50px;
      height: 50px;
      z-index: 1000;
      transition: transform 0.1s ease-in-out;
    }

    h1 {
      color: #b82b2f;
      font-family: Arial, sans-serif;
      text-shadow: 2px 2px 0 white, -2px -2px 0 white, 2px -2px 0 white, -2px 2px 0 white, 0 2px 0 white, 0 -2px 0 white, 2px 0 0 white, -2px 0 0 white;
    }

    h2 {
      color: #b82b2f;
      text-shadow: 2px 2px 0 white, -2px -2px 0 white, 2px -2px 0 white, -2px 2px 0 white, 0 2px 0 white, 0 -2px 0 white, 2px 0 0 white, -2px 0 0 white;
    }

    h3 {
      color: #b82b2f;
      text-shadow: 2px 2px 0 white, -2px -2px 0 white, 2px -2px 0 white, -2px 2px 0 white, 0 2px 0 white, 0 -2px 0 white, 2px 0 0 white, -2px 0 0 white;
    }

    h4 {
      color: #b82b2f;
      text-shadow: 2px 2px 0 white, -2px -2px 0 white, 2px -2px 0 white, -2px 2px 0 white, 0 2px 0 white, 0 -2px 0 white, 2px 0 0 white, -2px 0 0 white;
    }

    h5 {
      color: #b82b2f;
      text-shadow: 2px 2px 0 white, -2px -2px 0 white, 2px -2px 0 white, -2px 2px 0 white, 0 2px 0 white, 0 -2px 0 white, 2px 0 0 white, -2px 0 0 white;
    }

    p {
      text-shadow: 2px 2px 0 white, -2px -2px 0 white, 2px -2px 0 white, -2px 2px 0 white, 0 2px 0 white, 0 -2px 0 white, 2px 0 0 white, -2px 0 0 white;
    }

    /* Gallery Styles */
    .gallery-item {
      background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(240,240,240,0.9));
      border: 2px solid rgba(184,43,47,0.3);
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
      padding: 15px;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .gallery-item:hover {
      transform: scale(1.05);
      box-shadow: 0 16px 40px rgba(184,43,47,0.3);
      border-color: #b82b2f;
      z-index: 100;
    }

    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 10000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-image: url('SitePics/galaxy.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }

    .modal-content {
      margin: auto;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 90%;
      max-width: 1200px;
      height: 100%;
    }

    .modal img {
      max-width: 100%;
      max-height: 90vh;
      border: 3px solid #00ff00;
      border-radius: 12px;
      box-shadow: 0 10px 50px rgba(0,0,0,0.5);
    }

    .close {
      position: absolute;
      top: 15px;
      right: 35px;
      color: #f1f1f1;
      font-size: 40px;
      font-weight: bold;
      cursor: pointer;
      z-index: 10001;
    }

    .close:hover,
    .close:focus {
      color: #bbb;
      text-decoration: none;
      cursor: pointer;
    }

    #caption {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      color: #f1f1f1;
      font-size: 18px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
      background: rgba(0,0,0,0.7);
      padding: 10px 20px;
      border-radius: 8px;
    }

    /* Spotify Player Widget */
    #spotifyWidget {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 300px;
      background: #000;
      border: 3px solid #1DB954;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.5);
      z-index: 9999;
      cursor: move;
    }

    #spotifyHeader {
      background: #1DB954;
      color: #fff;
      padding: 8px 12px;
      font-weight: bold;
      font-size: 14px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: move;
      border-radius: 7px 7px 0 0;
    }

    #spotifyMinimize {
      background: none;
      border: none;
      color: #fff;
      font-size: 20px;
      cursor: pointer;
      padding: 0 5px;
      line-height: 1;
    }

    #spotifyMinimize:hover {
      color: #000;
    }

    .jumbotron {
      background-image: url("SitePics/rexbanner.png");
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
      color: white;
    }
  </style>
</head>
<body>

<div class="jumbotron jumbotron-fluid text-center" style="margin-bottom:0">
  <h1>Catherine Ann MacDonald</h1>
 <p style="color: #b82b2f; text-shadow: 2px 2px 0 white, -2px -2px 0 white, 2px -2px 0 white, -2px 2px 0 white, 0 2px 0 white, 0 -2px 0 white, 2px 0 0 white, -2px 0 0 white;"> Writer-Artist</p>
 <a href="ChatBot.html" style="text-decoration: none; transition: transform 0.2s ease; display: inline-block; position: relative;" onmouseover="this.style.transform='scale(1.2)'" onmouseout="this.style.transform='scale(1)'">
  <img src="TestBot/noise.gif" alt="noise" style="width: 22px; height: 15px; position: absolute; top: 5px; left: 5px;">
  <img src="TestBot/test.png" alt="computer" style="width: 32px; height: 32px; position: relative;">
 </a>
</div>

<!-- Navigation Bar -->
<nav class="navbar navbar-expand-sm navbar-dark" style="background-color: #b82b2f;">
  <a class="navbar-brand" href="#">Menu</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="collapsibleNavbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="index.html">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="currentportfolio.html">Current Portfolio</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="blog.html">Blog</a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="projectsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Projects
        </a>
        <div class="dropdown-menu" aria-labelledby="projectsDropdown">
          <a class="dropdown-item" href="spectrum.html">Spectrum</a>
          <a class="dropdown-item" href="party.html">Party</a>
          <div class="dropdown-divider"></div>
          <h6 class="dropdown-header">Fanart</h6>
          <a class="dropdown-item" href="Friends.html">Friends</a>
          <a class="dropdown-item" href="MediaILike.html">Media I Like</a>
        </div>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="mediumsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Mediums
        </a>
        <div class="dropdown-menu" aria-labelledby="mediumsDropdown">
          <a class="dropdown-item" href="3D.html">3D</a>
          <a class="dropdown-item" href="Photography.html">Photography</a>
          <a class="dropdown-item" href="Writing.html">Writing</a>
          <a class="dropdown-item" href="Videos.html">Videos</a>
          <div class="dropdown-divider"></div>
          <h6 class="dropdown-header">Coding</h6>
          <a class="dropdown-item" href="Websites.html">Websites</a>
          <a class="dropdown-item" href="Games.html">Games</a>
          <a class="dropdown-item" href="Built-in.html">Built-in</a>
          <div class="dropdown-divider"></div>
          <h6 class="dropdown-header">Physical Media</h6>
          <a class="dropdown-item" href="Sculptures.html">Sculptures</a>
          <a class="dropdown-item" href="Paintings.html">Paintings</a>
          <a class="dropdown-item" href="Sketches.html">Sketches</a>
          <a class="dropdown-item" href="Drawings.html">Drawings</a>
        </div>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="archiveDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Archive
        </a>
        <div class="dropdown-menu" aria-labelledby="archiveDropdown">
          <a class="dropdown-item" href="earlywork.html">Early Work</a>
          <a class="dropdown-item" href="OutdatedDesigns.html">Outdated Designs</a>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="Shop.html">Shop</a>
      </li>
    </ul>
  </div>  
</nav>

<!-- Draggable Spotify Player Widget -->
<div id="spotifyWidget">
  <div id="spotifyHeader">
    <span>🎵 Spotify Player</span>
    <button id="spotifyMinimize" onclick="toggleSpotify()">+</button>
  </div>
  <div id="spotifyContent" style="display: none;">
    <iframe id="spotifyIframe" style="border-radius: 0 0 7px 7px;" src="https://open.spotify.com/embed/playlist/66TP5uc6hwyESdV9AuvUZJ?utm_source=generator" width="100%" height="352" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
  </div>
</div>

<div class="container" style="margin-top:30px">
  <div class="row">
    <div class="col-12">
      <h1 style="text-shadow: 2px 2px 0 white, -2px -2px 0 white, 2px -2px 0 white, -2px 2px 0 white, 0 2px 0 white, 0 -2px 0 white, 2px 0 0 white, -2px 0 0 white;">Built-in</h1>
      <h5 style="text-shadow: 2px 2px 0 white, -2px -2px 0 white, 2px -2px 0 white, -2px 2px 0 white, 0 2px 0 white, 0 -2px 0 white, 2px 0 0 white, -2px 0 0 white;">Coded Experiences Built Into This Site</h5>
      <p style="text-shadow: 2px 2px 0 white, -2px -2px 0 white, 2px -2px 0 white, -2px 2px 0 white, 0 2px 0 white, 0 -2px 0 white, 2px 0 0 white, -2px 0 0 white;">Interactive coded experiences and tools directly embedded within this website.</p>
    </div>
  </div>

  <!-- Gallery Section -->
  <div class="row">
    <div class="col-12 mb-4">
      <h3 style="color: #b82b2f; text-shadow: 2px 2px 0 white, -2px -2px 0 white, 2px -2px 0 white, -2px 2px 0 white, 0 2px 0 white, 0 -2px 0 white, 2px 0 0 white, -2px 0 0 white;">Built-in Coded Experiences</h3>
    </div>
    
    <!-- Exercise 1: Animated Grid -->
    <div class="col-lg-6 col-md-12 mb-4">
      <div class="gallery-item">
        <h4 style="color: #b82b2f; margin-bottom: 15px;">Animated Grid Generator</h4>
        <p style="margin-bottom: 15px;">Interactive animated grid with color-shifting rectangles and moving shapes.</p>
        <canvas id="exercise1Canvas" width="400" height="400" style="border: 2px solid #b82b2f; border-radius: 8px; background: #000; display: block; margin: 0 auto;"></canvas>
        <div style="text-align: center; margin-top: 10px;">
          <button onclick="toggleExercise1()" style="background-color: #b82b2f; color: white; border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer;">Toggle Animation</button>
        </div>
      </div>
    </div>
    
    <!-- Exercise 2: Interactive Image Switcher -->
    <div class="col-lg-6 col-md-12 mb-4">
      <div class="gallery-item">
        <h4 style="color: #b82b2f; margin-bottom: 15px;">Interactive Image Switcher</h4>
        <p style="margin-bottom: 15px;">Click and hold to switch between iamfargeild.png and joebiben.png. Text moves across the screen.</p>
        <canvas id="exercise2Canvas" width="400" height="300" style="border: 2px solid #b82b2f; border-radius: 8px; background: #000; display: block; margin: 0 auto;"></canvas>
        <div style="text-align: center; margin-top: 10px;">
          <small>Click and hold to switch images</small>
        </div>
      </div>
    </div>
    
    <!-- Exercise 3: Character Animation -->
    <div class="col-lg-6 col-md-12 mb-4">
      <div class="gallery-item">
        <h4 style="color: #b82b2f; margin-bottom: 15px;">Character Animation</h4>
        <p style="margin-bottom: 15px;">Press 'W' key to transform the character. Watch the purple guy change!</p>
        <canvas id="exercise3Canvas" width="400" height="350" style="border: 2px solid #b82b2f; border-radius: 8px; background: #000; display: block; margin: 0 auto;"></canvas>
           <div style="text-align: center; margin-top: 10px;">
             <small>Press 'W' to transform character</small>
           </div>
           
           <!-- Original Video Reference -->
           <div style="text-align: center; margin-top: 20px;">
             <h5 style="color: #b82b2f; margin-bottom: 10px;">Original Version</h5>
             <video width="400" height="350" controls style="border: 2px solid #b82b2f; border-radius: 8px;">
               <source src="Oldcode/sketch3vid.mp4" type="video/mp4">
               Your browser does not support the video tag.
             </video>
             <p style="font-size: 12px; color: #666; margin-top: 5px;">Original Processing.js version</p>
             
             <!-- Character Reference Image -->
             <div style="margin-top: 15px;">
               <h6 style="color: #b82b2f; margin-bottom: 8px;">Character Reference</h6>
               <img src="Oldcode/purpguy.png" alt="Purple Guy Character" style="max-width: 300px; border: 2px solid #b82b2f; border-radius: 8px;">
               <p style="font-size: 12px; color: #666; margin-top: 5px;">Original character design</p>
             </div>
           </div>
         </div>
       </div>
    
    <!-- Drawing Tool -->
    <div class="col-lg-6 col-md-12 mb-4">
      <div class="gallery-item">
        <h4 style="color: #b82b2f; margin-bottom: 15px;">Multi-Color Drawing Tool</h4>
        <p style="margin-bottom: 15px;">Draw with different colors using number keys 1-5, erase with key 6. Press 'X' to clear, 'P' to save.</p>
        <canvas id="drawingToolCanvas" width="400" height="400" style="border: 2px solid #b82b2f; border-radius: 8px; background: #fff; display: block; margin: 0 auto;"></canvas>
        <div style="text-align: center; margin-top: 10px;">
          <small>Keys: 1-5 for colors, 6 for eraser, X to clear, P to save</small>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Image Modal -->
<div id="imageModal" class="modal">
  <span class="close">&times;</span>
  <div class="modal-content">
    <img id="modalImageDisplay" class="modal-img">
    <div id="caption"></div>
  </div>
</div>

<!-- Footer Header -->
<div style="background-image: url('SitePics/elizabanner.png'); background-size: contain; background-position: center; background-repeat: no-repeat; padding: 20px; margin: 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); text-align: center;">
  <h3 style="color: white; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.7);">Catherine Ann MacDonald</h3>
  <p style="color: white; margin: 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.7);">&copy; 2025</p>
</div>

<!-- Walking Character -->
<img id="walkingCharacter" class="walking-character" src="SitePics/Shadite.png" alt="Walking Character">

<script>
// Set Spotify widget to minimized state on load
document.addEventListener('DOMContentLoaded', function() {
  const spotifyWidget = document.getElementById('spotifyWidget');
  if (spotifyWidget) {
    spotifyWidget.style.width = '200px';
  }
});

// Draggable Spotify Widget
let isDragging = false;
let currentX;
let currentY;
let initialX;
let initialY;
let xOffset = 0;
let yOffset = 0;

const spotifyWidget = document.getElementById('spotifyWidget');
const spotifyHeader = document.getElementById('spotifyHeader');

spotifyHeader.addEventListener('mousedown', dragStart);
document.addEventListener('mousemove', drag);
document.addEventListener('mouseup', dragEnd);

function dragStart(e) {
  initialX = e.clientX - xOffset;
  initialY = e.clientY - yOffset;
  
  if (e.target === spotifyHeader || e.target.parentElement === spotifyHeader) {
    isDragging = true;
  }
}

function drag(e) {
  if (isDragging) {
    e.preventDefault();
    currentX = e.clientX - initialX;
    currentY = e.clientY - initialY;
    xOffset = currentX;
    yOffset = currentY;
    
    setTranslate(currentX, currentY, spotifyWidget);
  }
}

function dragEnd(e) {
  initialX = currentX;
  initialY = currentY;
  isDragging = false;
}

function setTranslate(xPos, yPos, el) {
  el.style.transform = `translate3d(${xPos}px, ${yPos}px, 0)`;
}

function toggleSpotify() {
  const content = document.getElementById('spotifyContent');
  const btn = document.getElementById('spotifyMinimize');
  
  if (content.style.display === 'none') {
    content.style.display = 'block';
    btn.textContent = '−';
    spotifyWidget.style.width = '300px';
  } else {
    content.style.display = 'none';
    btn.textContent = '+';
    spotifyWidget.style.width = '200px';
  }
}

// Modal functionality
function openModal(imageSrc, caption) {
  const modal = document.getElementById('imageModal');
  const modalImg = document.getElementById('modalImageDisplay');
  const captionText = document.getElementById('caption');
  
  modal.style.display = "block";
  modalImg.src = imageSrc;
  captionText.innerHTML = caption;
}

// Close modal when clicking outside
document.addEventListener('click', function(event) {
  const modal = document.getElementById('imageModal');
  if (event.target === modal) {
    modal.style.display = "none";
  }
});

// Close modal with escape key
document.addEventListener('keydown', function(event) {
  if (event.key === 'Escape') {
    const modal = document.getElementById('imageModal');
    modal.style.display = "none";
  }
});

       // Exercise 1: Animated Grid Generator
       let exercise1Running = false;
       let exercise1Counter = 0;
       let exercise1A = 0;
       let exercise1X = 0;
       let exercise1AnimationId = null;
       let exercise1Canvas = null;
       let exercise1Ctx = null;
       let exercise1LastTime = 0;
       let exercise1FrameDelay = 100; // Delay between frames in milliseconds

       function initExercise1() {
         if (!exercise1Canvas) {
           exercise1Canvas = document.getElementById('exercise1Canvas');
           exercise1Ctx = exercise1Canvas.getContext('2d');
         }
         
         function drawExercise1(currentTime) {
           if (!exercise1Running) return;
           
           // Throttle animation to reduce speed
           if (currentTime - exercise1LastTime < exercise1FrameDelay) {
             exercise1AnimationId = requestAnimationFrame(drawExercise1);
             return;
           }
           exercise1LastTime = currentTime;
           
           exercise1Ctx.fillStyle = 'rgb(0, 50, 100)';
           exercise1Ctx.fillRect(0, 0, 400, 400);
           
           // Draw animated grid with proper HSL colors
           let counterHSB = 0;
           for (let x = 0; x < 400; x += 15) {
             for (let j = 0; j < 400; j += 15) {
               const randg = Math.random() * 100;
               const randb = Math.random() * 100;
               
               exercise1Ctx.fillStyle = `hsl(${counterHSB}, ${randg}%, ${randb}%)`;
               exercise1Ctx.fillRect(x + 5, j + 5, 10, 10);
               
               counterHSB += 2;
               if (counterHSB > 360) {
                 counterHSB = 0;
               }
             }
           }
           
           // Draw animated shapes with proper HSL
           exercise1Ctx.fillStyle = `hsl(${exercise1Counter}, ${Math.random() * 100}%, 50%, ${exercise1Counter / 255})`;
           exercise1Ctx.beginPath();
           exercise1Ctx.ellipse(Math.random() * 90, exercise1Counter, Math.max(10, 200 - Math.random() * 200), 30, 0, 0, Math.PI * 2);
           exercise1Ctx.fill();
           
           exercise1Ctx.beginPath();
           exercise1Ctx.ellipse(Math.random() * 500, exercise1Counter, Math.max(10, 200 - Math.random() * 600), 30, 0, 0, Math.PI * 2);
           exercise1Ctx.fill();
           
           exercise1Ctx.fillStyle = `hsl(${exercise1Counter}, 70%, 25%, ${(200 - exercise1Counter / 2) / 255})`;
           exercise1Ctx.fillRect(exercise1Counter, 0, 25, Math.max(50, 400 - Math.random() * 180));
           exercise1Ctx.fillRect(exercise1Counter, 9, 95, Math.max(50, 400 - Math.random() * 600));
           
           if (exercise1Counter < 400) {
             exercise1Counter += 20; // Reduced from 40 to 20 for slower movement
           } else {
             exercise1Ctx.fillStyle = 'rgb(208, 208, 208)';
             exercise1Ctx.fillRect(0, 0, 400, 400);
             exercise1Counter = 0;
           }
           
           // Draw sine wave shapes
           const s = Math.sin(exercise1A);
           exercise1A += 0.05; // Reduced from 0.09 to 0.05 for slower animation
           exercise1X += 0.5; // Reduced from 0.9 to 0.5 for slower movement
           
           // Reset x position to prevent overflow
           if (exercise1X > 400) {
             exercise1X = -100;
           }
           
           exercise1Ctx.fillStyle = '#ffffff';
           exercise1Ctx.fillRect(Math.max(0, s * 70 + exercise1X), Math.max(0, s * 40 + exercise1X), 60, 20);
           exercise1Ctx.fillRect(Math.max(0, s * 70 + exercise1X), Math.max(0, s * 10 + exercise1X), 60, 20);
           exercise1Ctx.fillRect(Math.max(0, s * 80 + exercise1X), Math.max(0, s * 60 + exercise1X), 60, 20);
           exercise1Ctx.fillRect(Math.max(0, s * 80 + exercise1X), Math.max(0, s * 30 + exercise1X), 60, 20);
           exercise1Ctx.fillRect(Math.max(0, s * 90 + exercise1X), Math.max(0, s * 70 + exercise1X), 60, 20);
           exercise1Ctx.fillRect(Math.max(0, s * 90 + exercise1X), Math.max(0, s * 40 + exercise1X), 60, 20);
           
           exercise1AnimationId = requestAnimationFrame(drawExercise1);
         }
         
         drawExercise1();
       }

function toggleExercise1() {
  exercise1Running = !exercise1Running;
  if (exercise1Running) {
    initExercise1();
  } else {
    if (exercise1AnimationId) {
      cancelAnimationFrame(exercise1AnimationId);
    }
  }
}

       // Exercise 2: Interactive Image Switcher
       let exercise2MousePressed = false;
       let exercise2TextCounter = 0;
       let exercise2Image1 = null;
       let exercise2Image2 = null;
       let exercise2ImagesLoaded = false;

       function initExercise2() {
         const canvas = document.getElementById('exercise2Canvas');
         const ctx = canvas.getContext('2d');
         
         // Load the images
         exercise2Image1 = new Image();
         exercise2Image2 = new Image();
         
         exercise2Image1.onload = function() {
           exercise2Image2.onload = function() {
             exercise2ImagesLoaded = true;
           };
           exercise2Image2.src = 'Oldcode/joebiben.png';
         };
         exercise2Image1.src = 'Oldcode/iamfargeild.png';
         
         canvas.addEventListener('mousedown', () => exercise2MousePressed = true);
         canvas.addEventListener('mouseup', () => exercise2MousePressed = false);
         canvas.addEventListener('mouseleave', () => exercise2MousePressed = false);
         
         function drawExercise2() {
           ctx.fillStyle = '#000000';
           ctx.fillRect(0, 0, 400, 300);
           
           // Draw the actual images when loaded
           if (exercise2ImagesLoaded) {
             if (!exercise2MousePressed) {
               // First image - iamfargeild.png
               ctx.drawImage(exercise2Image1, 0, 0, 400, 300);
             } else {
               // Second image - joebiben.png
               ctx.drawImage(exercise2Image2, 0, 0, 400, 300);
             }
           } else {
             // Loading placeholder
             ctx.fillStyle = '#444444';
             ctx.fillRect(0, 0, 400, 300);
             ctx.fillStyle = '#ffffff';
             ctx.font = '20px Arial';
             ctx.fillText('Loading images...', 150, 150);
           }
           
           // Draw moving text
           ctx.fillStyle = 'rgb(255, 186, 64)';
           ctx.font = '50px Impact';
           ctx.fillText('Fargeild', exercise2TextCounter, 100);
           
           if (exercise2MousePressed) {
             ctx.fillStyle = 'rgb(255, 0, 0)';
             ctx.font = '30px Impact'; // Reduced font size to fit better
             // Let text flow off screen before returning to top
             const textY = exercise2TextCounter;
             ctx.fillText('Get a load of this guy.', 50, textY); // Adjusted x position for better fit
           }
           
           exercise2TextCounter++;
           // Let text completely flow off screen before resetting
           if (exercise2TextCounter > 450) { // Increased from 400 to 450
             exercise2TextCounter = -200; // Increased from -150 to -200
           }
           
           requestAnimationFrame(drawExercise2);
         }
         
         drawExercise2();
       }

// Exercise 3: Character Animation
let exercise3KeyPressed = false;
let exercise3Rotation = 0;
let exercise3Scale = 1;

function initExercise3() {
  const canvas = document.getElementById('exercise3Canvas');
  const ctx = canvas.getContext('2d');
  
  document.addEventListener('keydown', (e) => {
    if (e.key.toLowerCase() === 'w') {
      exercise3KeyPressed = true;
    }
  });
  
  document.addEventListener('keyup', (e) => {
    if (e.key.toLowerCase() === 'w') {
      exercise3KeyPressed = false;
    }
  });
  
  function drawExercise3() {
    ctx.fillStyle = '#000000';
    ctx.fillRect(0, 0, 400, 350);
    
    if (!exercise3KeyPressed) {
      // Draw normal character (pguy)
      drawNormalCharacter(ctx);
    } else {
      // Draw transformed character (jpguy)
      drawTransformedCharacter(ctx);
    }
    
    requestAnimationFrame(drawExercise3);
  }
  
         function drawNormalCharacter(ctx) {
           // Head - rectangular purple head
           ctx.fillStyle = 'rgb(170, 0, 200)';
           ctx.fillRect(200 - 25, 175 - 80, 50, 60);
           
           // Eyes - small white rectangles
           ctx.fillStyle = '#ffffff';
           ctx.fillRect(200 - 20, 175 - 70, 8, 6);
           ctx.fillRect(200 + 12, 175 - 70, 8, 6);
           
           // Pupils - small black rectangles in eyes
           ctx.fillStyle = '#000000';
           ctx.fillRect(200 - 18, 175 - 68, 4, 2);
           ctx.fillRect(200 + 14, 175 - 68, 4, 2);
           
           // Mouth - horizontal black rectangle
           ctx.fillRect(200 - 15, 175 - 55, 30, 8);
           
           // Body - large vertical rectangle
           ctx.fillStyle = 'rgb(170, 0, 200)';
           ctx.fillRect(200 - 30, 175 - 20, 60, 80);
           
           // Arms - horizontal rectangles extending from body
           ctx.fillRect(200 - 100, 175 - 10, 80, 20);
           ctx.fillRect(200 + 20, 175 - 10, 80, 20);
           
           // Legs - thick vertical rectangles
           ctx.fillRect(200 - 20, 175 + 60, 25, 60);
           ctx.fillRect(200 - 5, 175 + 60, 25, 60);
           
           // Feet - horizontal rectangles at bottom of legs
           ctx.fillRect(200 - 25, 175 + 120, 35, 15);
           ctx.fillRect(200 - 10, 175 + 120, 35, 15);
         }
  
         function drawTransformedCharacter(ctx) {
           ctx.save();
           ctx.translate(200, 175);
           ctx.rotate(Math.PI / 18); // 10 degrees
           
           // Oscillating scale between 1 and 1.5 for subtle effect
           const scale = 1 + Math.sin(exercise3Scale) * 0.25;
           ctx.scale(scale, scale);
           
           // Large distorted head - rectangular but stretched
           ctx.fillStyle = 'rgb(170, 0, 200)';
           ctx.fillRect(-40, -100, 80, 100);
           
           // Larger white eyes
           ctx.fillStyle = '#ffffff';
           ctx.fillRect(-30, -90, 15, 12);
           ctx.fillRect(15, -90, 15, 12);
           
           // Larger black pupils
           ctx.fillStyle = '#000000';
           ctx.fillRect(-25, -88, 8, 4);
           ctx.fillRect(20, -88, 8, 4);
           
           // Larger mouth
           ctx.fillRect(-25, -70, 50, 15);
           
           // Distorted body
           ctx.fillStyle = 'rgb(170, 0, 200)';
           ctx.fillRect(-50, -20, 100, 120);
           
           // Longer arms
           ctx.fillRect(-150, -10, 120, 25);
           ctx.fillRect(30, -10, 120, 25);
           
           // Thicker legs
           ctx.fillRect(-35, 100, 35, 80);
           ctx.fillRect(0, 100, 35, 80);
           
           // Larger feet
           ctx.fillRect(-45, 180, 50, 20);
           ctx.fillRect(-10, 180, 50, 20);
           
           ctx.restore();
           
           exercise3Scale += 0.05;
         }
  
  drawExercise3();
}

// Drawing Tool
let drawingToolDrawing = false;
let drawingToolCurrentColor = '#a5393c';
let drawingToolCanvas;
let drawingToolCtx;
let drawingToolIsErasing = false;

function initDrawingTool() {
  drawingToolCanvas = document.getElementById('drawingToolCanvas');
  drawingToolCtx = drawingToolCanvas.getContext('2d');
  
  drawingToolCtx.fillStyle = '#ffffff';
  drawingToolCtx.fillRect(0, 0, 400, 400);
  
  drawingToolCanvas.addEventListener('mousedown', startDrawing);
  drawingToolCanvas.addEventListener('mousemove', draw);
  drawingToolCanvas.addEventListener('mouseup', stopDrawing);
  drawingToolCanvas.addEventListener('mouseleave', stopDrawing);
  
  document.addEventListener('keydown', handleDrawingToolKeys);
}

function startDrawing(e) {
  drawingToolDrawing = true;
  const rect = drawingToolCanvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  
  drawingToolCtx.beginPath();
  drawingToolCtx.moveTo(x, y);
}

function draw(e) {
  if (!drawingToolDrawing) return;
  
  const rect = drawingToolCanvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  
  if (drawingToolIsErasing) {
    // Eraser mode
    drawingToolCtx.globalCompositeOperation = 'destination-out';
    drawingToolCtx.lineWidth = 25;
    drawingToolCtx.lineCap = 'round';
    drawingToolCtx.lineTo(x, y);
    drawingToolCtx.stroke();
    drawingToolCtx.globalCompositeOperation = 'source-over';
  } else {
    // Drawing mode
    drawingToolCtx.lineWidth = 5;
    drawingToolCtx.strokeStyle = drawingToolCurrentColor;
    drawingToolCtx.lineCap = 'round';
    drawingToolCtx.lineTo(x, y);
    drawingToolCtx.stroke();
  }
}

function stopDrawing() {
  drawingToolDrawing = false;
  drawingToolCtx.beginPath(); // Start new path for next drawing
}

function handleDrawingToolKeys(e) {
  const key = e.key;
  
  switch(key) {
    case '1':
      drawingToolCurrentColor = 'rgb(165, 57, 60)'; // red
      drawingToolIsErasing = false;
      break;
    case '2':
      drawingToolCurrentColor = 'rgb(35, 62, 115)'; // blue
      drawingToolIsErasing = false;
      break;
    case '3':
      drawingToolCurrentColor = 'rgb(75, 183, 73)'; // green
      drawingToolIsErasing = false;
      break;
    case '4':
      drawingToolCurrentColor = 'rgb(17, 17, 17)'; // black
      drawingToolIsErasing = false;
      break;
    case '5':
      drawingToolCurrentColor = 'rgb(233, 146, 50)'; // orange
      drawingToolIsErasing = false;
      break;
    case '6':
      // Eraser mode
      drawingToolIsErasing = true;
      break;
    case 'x':
    case 'X':
      // Clear canvas
      drawingToolCtx.fillStyle = '#ffffff';
      drawingToolCtx.fillRect(0, 0, 400, 400);
      break;
    case 'p':
    case 'P':
      // Save canvas
      const link = document.createElement('a');
      link.download = 'drawing-' + Date.now() + '.png';
      link.href = drawingToolCanvas.toDataURL();
      link.click();
      break;
  }
}

// Initialize all exercises when page loads
document.addEventListener('DOMContentLoaded', function() {
  initExercise2();
  initExercise3();
  initDrawingTool();
});
</script>

<style>
@keyframes spectrumScroll {
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 200% 50%;
  }
}

@keyframes gradient {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}
</style>

</body>
</html>
